
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="canonical" href="https://phptuts.github.io/svelte-docs/flappybird/">
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.2, mkdocs-material-7.2.6">
    
    
      
        <title>Flappy Bird - Svelte Tutorials</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.802231af.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.3f5d1f46.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
      <link rel="stylesheet" href="../css/style.css">
    
    
      


    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    <script>function __prefix(e){return new URL("..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#how-to-build-a-flappy-bird-game-in-svelte-with-typescript" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Svelte Tutorials" class="md-header__button md-logo" aria-label="Svelte Tutorials" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Svelte Tutorials
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Flappy Bird
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Svelte Tutorials" class="md-nav__button md-logo" aria-label="Svelte Tutorials" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    Svelte Tutorials
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Flappy Bird
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Flappy Bird
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#youtube-video" class="md-nav__link">
    Youtube Video
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#final-demo" class="md-nav__link">
    Final Demo
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#other-demo" class="md-nav__link">
    Other Demo
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#steps" class="md-nav__link">
    Steps
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../webcomponents/" class="md-nav__link">
        Web Components
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../firebase-recipe-site/login/" class="md-nav__link">
        SvelteKit Firebase Auth
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../firebase-recipe-site/ssr/" class="md-nav__link">
        SvelteKit Firebase SSR
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../firebase-recipe-site/form/" class="md-nav__link">
        SvelteKit Forms
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../firebase-recipe-site/upload-picture/" class="md-nav__link">
        SvelteKit FireStorage
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../firebase-recipe-site/navbar/" class="md-nav__link">
        SvelteKit Navbar
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#youtube-video" class="md-nav__link">
    Youtube Video
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#final-demo" class="md-nav__link">
    Final Demo
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#other-demo" class="md-nav__link">
    Other Demo
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#steps" class="md-nav__link">
    Steps
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="how-to-build-a-flappy-bird-game-in-svelte-with-typescript">How to build a flappy bird game in svelte with typescript</h1>
<h2 id="youtube-video">Youtube Video</h2>
<iframe width="560" height="315" src="https://www.youtube.com/embed/nhrYBoVI8pQ" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

<h2 id="final-demo">Final Demo</h2>
<p><a href="https://github.com/phptuts/fb-yt">Demo</a></p>
<p><a href="https://phptuts.github.io/fb-yt/">Code</a></p>
<h2 id="other-demo">Other Demo</h2>
<p><a href="https://phptuts.github.io/flappy-bird/">Demo</a></p>
<p><a href="https://github.com/phptuts/flappy-bird/">Code</a></p>
<h2 id="steps">Steps</h2>
<p>1. Create the svelte project.</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>npx degit sveltejs/template .
</code></pre></div>
</td></tr></table>
<p>2. Turn the project into a typescript project. (It will be nice to have interfaces)</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>node scripts/setupTypeScript.js
</code></pre></div>
</td></tr></table>
<p>3. Run npm install to install the dependencies.</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>npm install
</code></pre></div>
</td></tr></table>
<p>4. Clean up the project</p>
<ul>
<li>Delete everything in the public/global.css</li>
<li>Make all the links relative in the public/index.html</li>
<li>Change the title in the index.html file to Svelte Flappy Bird</li>
<li>Delete everything in our src/App.svelte file</li>
</ul>
<p>index.html file</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&quot;utf-8&quot;</span> <span class="p">/&gt;</span>
<span class="p">&lt;</span><span class="nt">meta</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;viewport&quot;</span> <span class="na">content</span><span class="o">=</span><span class="s">&quot;width=device-width,initial-scale=1&quot;</span> <span class="p">/&gt;</span>

<span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Svelte Flappy Bird<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">&quot;icon&quot;</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;image/png&quot;</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;/favicon.png&quot;</span> <span class="p">/&gt;</span>
<span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;/global.css&quot;</span> <span class="p">/&gt;</span>
<span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;/build/bundle.css&quot;</span> <span class="p">/&gt;</span>

<span class="p">&lt;</span><span class="nt">script</span> <span class="na">defer</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;/build/bundle.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</code></pre></div>
</td></tr></table>
<p>5. Create a file name game.ts and copy the frame interface into file. This is will be used to render the game.</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">export</span> <span class="kd">interface</span> <span class="nx">Frame</span> <span class="p">{</span>
  <span class="nx">gameOver</span>: <span class="kt">boolean</span><span class="p">;</span>
  <span class="nx">gameStarted</span>: <span class="kt">boolean</span><span class="p">;</span>
  <span class="nx">width</span>: <span class="kt">number</span><span class="p">;</span>
  <span class="nx">height</span>: <span class="kt">number</span><span class="p">;</span>
  <span class="nx">score</span>: <span class="kt">number</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
</td></tr></table>
<p>6. Create a game class. Is is what is used to generate the frames and is where all of our game logic will be stored. For now our game controller will take in a width and height value.</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">export</span> <span class="kd">class</span> <span class="nx">GameController</span> <span class="p">{}</span>
</code></pre></div>
</td></tr></table>
<p>7. Let's create a constructor that takes in width, height as public readonly variables. We'll also create private class variables that will store the frame and velocity.</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="kd">class</span> <span class="nx">GameController</span> <span class="p">{</span>
  <span class="k">private</span> <span class="nx">frame</span>: <span class="kt">Frame</span><span class="p">;</span>

  <span class="k">private</span> <span class="nx">velocity</span> <span class="o">=</span> <span class="mf">0</span><span class="p">;</span>

  <span class="kr">constructor</span><span class="p">(</span><span class="k">public</span> <span class="k">readonly</span> <span class="nx">height</span> <span class="o">=</span> <span class="mf">800</span><span class="p">,</span> <span class="k">public</span> <span class="k">readonly</span> <span class="nx">width</span> <span class="o">=</span> <span class="mf">400</span><span class="p">)</span> <span class="p">{}</span>
<span class="p">}</span>
</code></pre></div>
</td></tr></table>
<p>8. Create a method called newGame. This will save a new frame to the frame class variable and return the newly created frame. We don't want to start the game until the user presses a button so we'll default gameOver and gameStarted to false.</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">export</span> <span class="kd">class</span> <span class="nx">GameController</span> <span class="p">{</span>
  <span class="k">private</span> <span class="nx">frame</span>: <span class="kt">Frame</span><span class="p">;</span>

  <span class="k">private</span> <span class="nx">velocity</span> <span class="o">=</span> <span class="mf">0</span><span class="p">;</span>

  <span class="kr">constructor</span><span class="p">(</span><span class="k">public</span> <span class="k">readonly</span> <span class="nx">height</span> <span class="o">=</span> <span class="mf">800</span><span class="p">,</span> <span class="k">public</span> <span class="k">readonly</span> <span class="nx">width</span> <span class="o">=</span> <span class="mf">400</span><span class="p">)</span> <span class="p">{}</span>

  <span class="k">public</span> <span class="nx">newGame</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">frame</span> <span class="o">=</span> <span class="p">{</span>
      <span class="nx">score</span>: <span class="kt">0</span><span class="p">,</span>
      <span class="nx">width</span>: <span class="kt">this.width</span><span class="p">,</span>
      <span class="nx">height</span>: <span class="kt">this.height</span><span class="p">,</span>
      <span class="nx">gameOver</span>: <span class="kt">false</span><span class="p">,</span>
      <span class="nx">gameStarted</span>: <span class="kt">false</span><span class="p">,</span>
    <span class="p">};</span>

    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</td></tr></table>
<p>9. We'll use this create a game.svelte component to render the game onto the screen.</p>
<p>Game.svelte</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">script</span> <span class="na">lang</span><span class="o">=</span><span class="s">&quot;ts&quot;</span><span class="p">&gt;</span>
  <span class="k">import</span> <span class="p">{</span> <span class="nx">GameController</span> <span class="p">}</span> <span class="kr">from</span> <span class="s2">&quot;./game&quot;</span><span class="p">;</span>
  <span class="kd">const</span> <span class="nx">game</span> <span class="o">=</span> <span class="ow">new</span> <span class="nx">GameController</span><span class="p">();</span>
  <span class="kd">let</span> <span class="nx">frame</span> <span class="o">=</span> <span class="nx">game</span><span class="p">.</span><span class="nx">newGame</span><span class="p">();</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">style</span><span class="p">&gt;</span>
  <span class="nt">main</span> <span class="p">{</span>
    <span class="k">position</span><span class="p">:</span> <span class="kc">relative</span><span class="p">;</span>
    <span class="k">border</span><span class="p">:</span> <span class="kc">solid</span> <span class="kc">black</span> <span class="mi">1</span><span class="kt">px</span><span class="p">;</span>
    <span class="k">overflow</span><span class="p">:</span> <span class="kc">hidden</span><span class="p">;</span>
    <span class="k">background-color</span><span class="p">:</span> <span class="kc">lightblue</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">main</span>
  <span class="na">style</span><span class="o">=</span><span class="s">&quot;width: {frame.width}px; height: {frame.height}px;&quot;</span>
  <span class="na">class</span><span class="o">=</span><span class="s">&quot;game&quot;</span>
<span class="p">&gt;&lt;/</span><span class="nt">main</span><span class="p">&gt;</span>
</code></pre></div>
</td></tr></table>
<p>App.svelte</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">script</span> <span class="na">lang</span><span class="o">=</span><span class="s">&quot;ts&quot;</span><span class="p">&gt;</span>
  <span class="k">import</span> <span class="nx">Game</span> <span class="kr">from</span> <span class="s2">&quot;./Game.svelte&quot;</span><span class="p">;</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">Game</span> <span class="p">/&gt;</span>
</code></pre></div>
</td></tr></table>
<p>It should look like this.
<img alt="step 9" src="../images/flappybird/step9.png" /></p>
<p>10. Add interfaces for the pipes so we can start moving the pipes across the screen. Modify the frame frame to accept 2 pipes. A firstPipe and second Pipe.</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">export</span> <span class="kd">interface</span> <span class="nx">Frame</span> <span class="p">{</span>
  <span class="nx">firstPipe</span>: <span class="kt">PipePair</span><span class="p">;</span>
  <span class="nx">secondPipe</span>: <span class="kt">PipePair</span><span class="p">;</span>
  <span class="nx">gameOver</span>: <span class="kt">boolean</span><span class="p">;</span>
  <span class="nx">gameStarted</span>: <span class="kt">boolean</span><span class="p">;</span>
  <span class="nx">width</span>: <span class="kt">number</span><span class="p">;</span>
  <span class="nx">height</span>: <span class="kt">number</span><span class="p">;</span>
  <span class="nx">score</span>: <span class="kt">number</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">export</span> <span class="kd">interface</span> <span class="nx">PipePair</span> <span class="p">{</span>
  <span class="nx">topPipe</span>: <span class="kt">Pipe</span><span class="p">;</span>
  <span class="nx">bottomPipe</span>: <span class="kt">Pipe</span><span class="p">;</span>
  <span class="nx">show</span>: <span class="kt">boolean</span><span class="p">;</span>
  <span class="nx">left</span>: <span class="kt">number</span><span class="p">;</span>
  <span class="nx">width</span>: <span class="kt">number</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">export</span> <span class="kd">interface</span> <span class="nx">Pipe</span> <span class="p">{</span>
  <span class="nx">top</span>: <span class="kt">number</span><span class="p">;</span>
  <span class="nx">height</span>: <span class="kt">number</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
</td></tr></table>
<p>11. Modify the GameController contrustor to take in more pipe parameters.</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">export</span> <span class="kd">class</span> <span class="nx">GameController</span> <span class="p">{</span>
  <span class="k">private</span> <span class="nx">frame</span>: <span class="kt">Frame</span><span class="p">;</span>

  <span class="k">private</span> <span class="nx">velocity</span> <span class="o">=</span> <span class="mf">0</span><span class="p">;</span>

  <span class="kr">constructor</span><span class="p">(</span>
    <span class="k">public</span> <span class="k">readonly</span> <span class="nx">height</span> <span class="o">=</span> <span class="mf">800</span><span class="p">,</span>
    <span class="k">public</span> <span class="k">readonly</span> <span class="nx">width</span> <span class="o">=</span> <span class="mf">400</span><span class="p">,</span>
    <span class="k">public</span> <span class="k">readonly</span> <span class="nx">pipeWidth</span> <span class="o">=</span> <span class="mf">50</span><span class="p">,</span>
    <span class="k">public</span> <span class="k">readonly</span> <span class="nx">pipeGap</span> <span class="o">=</span> <span class="mf">150</span><span class="p">,</span>
    <span class="k">public</span> <span class="k">readonly</span> <span class="nx">minTopForTopPipe</span> <span class="o">=</span> <span class="mf">70</span><span class="p">,</span>
    <span class="k">public</span> <span class="k">readonly</span> <span class="nx">maxTopForTopPipe</span> <span class="o">=</span> <span class="mf">350</span>
  <span class="p">)</span> <span class="p">{}</span>

  <span class="k">public</span> <span class="nx">newGame</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">frame</span> <span class="o">=</span> <span class="p">{</span>
      <span class="nx">score</span>: <span class="kt">0</span><span class="p">,</span>
      <span class="nx">width</span>: <span class="kt">this.width</span><span class="p">,</span>
      <span class="nx">height</span>: <span class="kt">this.height</span><span class="p">,</span>
      <span class="nx">gameOver</span>: <span class="kt">false</span><span class="p">,</span>
      <span class="nx">gameStarted</span>: <span class="kt">false</span><span class="p">,</span>
    <span class="p">};</span>

    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</td></tr></table>
<p>12. Next create a private method to generate a random length of pipe between our minTopForTopPipe and maxTopForTopPipe.</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">private</span> <span class="nx">randomYForTopPipe</span><span class="p">()</span><span class="o">:</span> <span class="kt">number</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">minTopForTopPipe</span> <span class="o">+</span>
      <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">maxTopForTopPipe</span> <span class="o">-</span> <span class="k">this</span><span class="p">.</span><span class="nx">minTopForTopPipe</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span>
    <span class="p">);</span>
  <span class="p">}</span>
</code></pre></div>
</td></tr></table>
<p>13. Using the function created previously we can now create a private method for creating a pipe. Show will determine if the pipe is visible on the screen.</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">private</span> <span class="nx">createPipe</span><span class="p">(</span><span class="nx">show</span>: <span class="kt">boolean</span><span class="p">)</span><span class="o">:</span> <span class="nx">PipePair</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">height</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">randomYForTopPipe</span><span class="p">();</span>

    <span class="k">return</span> <span class="p">{</span>
      <span class="nx">topPipe</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">top</span>: <span class="kt">0</span><span class="p">,</span>
        <span class="nx">height</span><span class="p">,</span>
      <span class="p">},</span>
      <span class="nx">bottomPipe</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">top</span>: <span class="kt">height</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">pipeGap</span><span class="p">,</span>
        <span class="nx">height</span>: <span class="kt">this.height</span><span class="p">,</span>
      <span class="p">},</span>
      <span class="nx">left</span>: <span class="kt">this.width</span> <span class="o">-</span> <span class="k">this</span><span class="p">.</span><span class="nx">pipeWidth</span><span class="p">,</span>
      <span class="nx">width</span>: <span class="kt">this.pipeWidth</span><span class="p">,</span>
      <span class="nx">show</span><span class="p">,</span>
    <span class="p">};</span>
  <span class="p">}</span>
</code></pre></div>
</td></tr></table>
<p>14. Modify the new game function to create pipe objects. We only want one of the pipes visible to start.</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>  <span class="k">public</span> <span class="nx">newGame</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">firstPipe</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">createPipe</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
    <span class="kd">let</span> <span class="nx">secondPipe</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">createPipe</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">frame</span> <span class="o">=</span> <span class="p">{</span>
      <span class="nx">firstPipe</span><span class="p">,</span>
      <span class="nx">secondPipe</span><span class="p">,</span>
      <span class="nx">score</span>: <span class="kt">0</span><span class="p">,</span>
      <span class="nx">width</span>: <span class="kt">this.width</span><span class="p">,</span>
      <span class="nx">height</span>: <span class="kt">this.height</span><span class="p">,</span>
      <span class="nx">gameOver</span>: <span class="kt">false</span><span class="p">,</span>
      <span class="nx">gameStarted</span>: <span class="kt">false</span><span class="p">,</span>
    <span class="p">};</span>

    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="p">;</span>
  <span class="p">}</span>
</code></pre></div>
</td></tr></table>
<p>15. Comment out the + this.pipeWidth in the create pipe method.</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">private</span> <span class="nx">createPipe</span><span class="p">(</span><span class="nx">show</span>: <span class="kt">boolean</span><span class="p">)</span><span class="o">:</span> <span class="nx">PipePair</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">height</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">randomYForTopPipe</span><span class="p">();</span>

    <span class="k">return</span> <span class="p">{</span>
      <span class="nx">topPipe</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">top</span>: <span class="kt">0</span><span class="p">,</span>
        <span class="nx">height</span><span class="p">,</span>
      <span class="p">},</span>
      <span class="nx">bottomPipe</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">top</span>: <span class="kt">height</span><span class="p">,</span> <span class="c1">// commnet when done + this.pipeGap,</span>
        <span class="nx">height</span>: <span class="kt">this.height</span><span class="p">,</span>
      <span class="p">},</span>
      <span class="nx">left</span>: <span class="kt">this.width</span> <span class="o">-</span> <span class="k">this</span><span class="p">.</span><span class="nx">pipeWidth</span><span class="p">,</span> <span class="c1">// delete line after testing</span>
      <span class="c1">//left: this.width,  uncomment this line after testing</span>
      <span class="nx">width</span>: <span class="kt">this.pipeWidth</span><span class="p">,</span>
      <span class="nx">show</span><span class="p">,</span>
    <span class="p">};</span>
  <span class="p">}</span>
</code></pre></div>
</td></tr></table>
<p>16. Create a pipe component that takes in a PipePair and renders it to the screen.</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">script</span> <span class="na">lang</span><span class="o">=</span><span class="s">&quot;ts&quot;</span><span class="p">&gt;</span>
  <span class="k">import</span> <span class="nx">type</span> <span class="p">{</span> <span class="nx">PipePair</span> <span class="p">}</span> <span class="kr">from</span> <span class="s2">&quot;./game&quot;</span><span class="p">;</span>
  <span class="k">export</span> <span class="kd">let</span> <span class="nx">pipe</span><span class="o">:</span> <span class="nx">PipePair</span><span class="p">;</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">style</span><span class="p">&gt;</span>
  <span class="p">.</span><span class="nc">pipe</span> <span class="p">{</span>
    <span class="k">position</span><span class="p">:</span> <span class="kc">absolute</span><span class="p">;</span>
    <span class="k">background-color</span><span class="p">:</span> <span class="kc">palegreen</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>

{#if pipe.show }
<span class="p">&lt;</span><span class="nt">section</span>
  <span class="na">style</span><span class="o">=</span><span class="s">&quot;left: {pipe.left}px; top: {pipe.topPipe.top}px; width: {pipe.width}px; height: {pipe.topPipe.height}px;&quot;</span>
  <span class="na">class</span><span class="o">=</span><span class="s">&quot;top-pipe pipe&quot;</span>
<span class="p">&gt;&lt;/</span><span class="nt">section</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">section</span>
  <span class="na">style</span><span class="o">=</span><span class="s">&quot;left: {pipe.left}px; top: {pipe.bottomPipe.top}px; width: {pipe.width}px; height: {pipe.bottomPipe.height}px;&quot;</span>
  <span class="na">class</span><span class="o">=</span><span class="s">&quot;top-bottom pipe&quot;</span>
<span class="p">&gt;&lt;/</span><span class="nt">section</span><span class="p">&gt;</span>
{/if}
</code></pre></div>
</td></tr></table>
<p>18. Create 2 instances of the pipe component and use the frame to pass the pipe pair to them. Refresh page and make sure pipe's height changes. Besure to delete the testing code.</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">main</span> <span class="na">style</span><span class="o">=</span><span class="s">&quot;width: {frame.width}px; height: {frame.height}px;&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;game&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">Pipe</span> <span class="na">pipe</span><span class="o">=</span><span class="s">&quot;{frame.firstPipe}&quot;</span> <span class="p">/&gt;</span>
  <span class="p">&lt;</span><span class="nt">Pipe</span> <span class="na">pipe</span><span class="o">=</span><span class="s">&quot;{frame.secondPipe}&quot;</span> <span class="p">/&gt;</span>
<span class="p">&lt;/</span><span class="nt">main</span><span class="p">&gt;</span>
</code></pre></div>
</td></tr></table>
<p><img alt="game pic" src="../images/flappybird/step18.png" /></p>
<p>19. Next let's make the pipe move across the screen. We want the second pipe to start moving when the first pipe 70% through. We also want the pipe to disappear when the pipe has completely gone through the game.</p>
<p>We'll also need to add parameters to our constructor, speed and generateNewPipePercent.</p>
<p>To do this we'll create 2 functions. One called movePipe and one called nextFrame. nextFrame will generate a new frame with the pipe movement will move a pipe pair in x direction.</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code> <span class="kr">constructor</span><span class="p">(</span>
    <span class="k">public</span> <span class="k">readonly</span> <span class="nx">height</span> <span class="o">=</span> <span class="mf">800</span><span class="p">,</span>
    <span class="k">public</span> <span class="k">readonly</span> <span class="nx">width</span> <span class="o">=</span> <span class="mf">400</span><span class="p">,</span>
    <span class="k">public</span> <span class="k">readonly</span> <span class="nx">pipeWidth</span> <span class="o">=</span> <span class="mf">50</span><span class="p">,</span>
    <span class="k">public</span> <span class="k">readonly</span> <span class="nx">pipeGap</span> <span class="o">=</span> <span class="mf">150</span><span class="p">,</span>
    <span class="k">public</span> <span class="k">readonly</span> <span class="nx">minTopForTopPipe</span> <span class="o">=</span> <span class="mf">70</span><span class="p">,</span>
    <span class="k">public</span> <span class="k">readonly</span> <span class="nx">maxTopForTopPipe</span> <span class="o">=</span> <span class="mf">350</span><span class="p">,</span>
    <span class="k">public</span> <span class="k">readonly</span> <span class="nx">generateNewPipePercent</span> <span class="o">=</span> <span class="mf">0.7</span><span class="p">,</span>
    <span class="k">public</span> <span class="k">readonly</span> <span class="nx">speed</span> <span class="o">=</span> <span class="mf">1</span>
  <span class="p">)</span> <span class="p">{}</span>

  <span class="k">private</span> <span class="nx">movePipe</span><span class="p">(</span><span class="nx">pipe</span>: <span class="kt">PipePair</span><span class="p">,</span> <span class="nx">otherPipe</span>: <span class="kt">PipePair</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">pipe</span><span class="p">.</span><span class="nx">show</span> <span class="o">&amp;&amp;</span> <span class="nx">pipe</span><span class="p">.</span><span class="nx">left</span> <span class="o">&lt;=</span> <span class="k">this</span><span class="p">.</span><span class="nx">pipeWidth</span> <span class="o">*</span> <span class="o">-</span><span class="mf">1</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">pipe</span><span class="p">.</span><span class="nx">show</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">pipe</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">pipe</span><span class="p">.</span><span class="nx">show</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">pipe</span><span class="p">.</span><span class="nx">left</span> <span class="o">-=</span> <span class="k">this</span><span class="p">.</span><span class="nx">speed</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span>
      <span class="nx">otherPipe</span><span class="p">.</span><span class="nx">left</span> <span class="o">&lt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">width</span> <span class="o">*</span> <span class="p">(</span><span class="mf">1</span> <span class="o">-</span> <span class="k">this</span><span class="p">.</span><span class="nx">generateNewPipePercent</span><span class="p">)</span> <span class="o">&amp;&amp;</span>
      <span class="nx">otherPipe</span><span class="p">.</span><span class="nx">show</span> <span class="o">&amp;&amp;</span>
      <span class="o">!</span><span class="nx">pipe</span><span class="p">.</span><span class="nx">show</span>
    <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">createPipe</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nx">pipe</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">public</span> <span class="nx">nextFrame</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">firstPipe</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">movePipe</span><span class="p">(</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">firstPipe</span><span class="p">,</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">secondPipe</span>
    <span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">secondPipe</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">movePipe</span><span class="p">(</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">secondPipe</span><span class="p">,</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">firstPipe</span>
    <span class="p">);</span>

    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="p">;</span>
  <span class="p">}</span>
</code></pre></div>
</td></tr></table>
<p>20. Next create a setInterval in the game component so that nextFrame is called 90 times a second. This will be done in the game component.</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="nx">setInterval</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span>
  <span class="nx">frame</span> <span class="o">=</span> <span class="nx">game</span><span class="p">.</span><span class="nx">nextFrame</span><span class="p">();</span>
<span class="p">},</span> <span class="mf">1000</span> <span class="o">/</span> <span class="mf">90</span><span class="p">);</span>
</code></pre></div>
</td></tr></table>
<p><img alt="step 20" src="../images/flappybird/step20.gif" /></p>
<p>21. Add ground height to the constructor</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">export</span> <span class="kd">class</span> <span class="nx">GameController</span> <span class="p">{</span>
  <span class="k">private</span> <span class="nx">frame</span>: <span class="kt">Frame</span><span class="p">;</span>

  <span class="k">private</span> <span class="nx">velocity</span> <span class="o">=</span> <span class="mf">0</span><span class="p">;</span>

  <span class="kr">constructor</span><span class="p">(</span>
    <span class="k">public</span> <span class="k">readonly</span> <span class="nx">height</span> <span class="o">=</span> <span class="mf">800</span><span class="p">,</span>
    <span class="k">public</span> <span class="k">readonly</span> <span class="nx">width</span> <span class="o">=</span> <span class="mf">400</span><span class="p">,</span>
    <span class="k">public</span> <span class="k">readonly</span> <span class="nx">pipeWidth</span> <span class="o">=</span> <span class="mf">50</span><span class="p">,</span>
    <span class="k">public</span> <span class="k">readonly</span> <span class="nx">pipeGap</span> <span class="o">=</span> <span class="mf">150</span><span class="p">,</span>
    <span class="k">public</span> <span class="k">readonly</span> <span class="nx">minTopForTopPipe</span> <span class="o">=</span> <span class="mf">70</span><span class="p">,</span>
    <span class="k">public</span> <span class="k">readonly</span> <span class="nx">maxTopForTopPipe</span> <span class="o">=</span> <span class="mf">350</span><span class="p">,</span>
    <span class="k">public</span> <span class="k">readonly</span> <span class="nx">generateNewPipePercent</span> <span class="o">=</span> <span class="mf">0.7</span><span class="p">,</span>
    <span class="k">public</span> <span class="k">readonly</span> <span class="nx">speed</span> <span class="o">=</span> <span class="mf">1</span><span class="p">,</span>
    <span class="k">public</span> <span class="k">readonly</span> <span class="nx">groundHeight</span> <span class="o">=</span> <span class="mf">20</span>
  <span class="p">)</span> <span class="p">{}</span>
</code></pre></div>
</td></tr></table>
<p>22. Add the ground interface to our game.ts file.</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">export</span> <span class="kd">interface</span> <span class="nx">Ground</span> <span class="p">{</span>
  <span class="nx">height</span>: <span class="kt">number</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
</td></tr></table>
<p>23. Add ad it to the frame and fix our newGame function.</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">public</span> <span class="nx">newGame</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">firstPipe</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">createPipe</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
    <span class="kd">let</span> <span class="nx">secondPipe</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">createPipe</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">frame</span> <span class="o">=</span> <span class="p">{</span>
      <span class="nx">firstPipe</span><span class="p">,</span>
      <span class="nx">secondPipe</span><span class="p">,</span>
      <span class="nx">score</span>: <span class="kt">0</span><span class="p">,</span>
      <span class="nx">width</span>: <span class="kt">this.width</span><span class="p">,</span>
      <span class="nx">height</span>: <span class="kt">this.height</span><span class="p">,</span>
      <span class="nx">gameOver</span>: <span class="kt">false</span><span class="p">,</span>
      <span class="nx">gameStarted</span>: <span class="kt">false</span><span class="p">,</span>
      <span class="nx">ground</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">height</span>: <span class="kt">this.groundHeight</span>
      <span class="p">}</span>
    <span class="p">};</span>

    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="p">;</span>
  <span class="p">}</span>
</code></pre></div>
</td></tr></table>
<p>24. Next use it to render the ground of the svelte game. Add the ground style and use it to render a section at the bottom of the page.</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">style</span><span class="p">&gt;</span>
    <span class="nt">main</span> <span class="p">{</span>
        position: relative;
        border: solid black 1px;
        overflow: hidden;
        background-color: lightblue;
    }
    #ground {
        background-color: brown;
        width: 100%;
        position: absolute;
        bottom: 0;
        left: 0;
    }
<span class="p">&lt;</span><span class="nt">style</span><span class="p">&gt;</span>
</code></pre></div>
</td></tr></table>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>...
<span class="p">&lt;</span><span class="nt">section</span> <span class="na">style</span><span class="o">=</span><span class="s">&quot;height: {frame.ground.height}px;&quot;</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;ground&quot;</span> <span class="p">&gt;&lt;/</span><span class="nt">section</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">main</span><span class="p">&gt;</span>
</code></pre></div>
</td></tr></table>
<p><img alt="step24" src="../images/flappybird/step24.png" /></p>
<p>25. Add the bird interface to the game.ts</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">export</span> <span class="kd">interface</span> <span class="nx">Bird</span> <span class="p">{</span>
  <span class="nx">top</span>: <span class="kt">number</span><span class="p">;</span>
  <span class="nx">left</span>: <span class="kt">number</span><span class="p">;</span>
  <span class="nx">size</span>: <span class="kt">number</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
</td></tr></table>
<p>26. Next add birdX, gravity, jumpVelocity, birdSize, and slowVelocityBy to the game controller consturctor.</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="kr">constructor</span><span class="p">(</span>
    <span class="k">public</span> <span class="k">readonly</span> <span class="nx">height</span> <span class="o">=</span> <span class="mf">800</span><span class="p">,</span>
    <span class="k">public</span> <span class="k">readonly</span> <span class="nx">width</span> <span class="o">=</span> <span class="mf">400</span><span class="p">,</span>
    <span class="k">public</span> <span class="k">readonly</span> <span class="nx">pipeWidth</span> <span class="o">=</span> <span class="mf">50</span><span class="p">,</span>
    <span class="k">public</span> <span class="k">readonly</span> <span class="nx">pipeGap</span> <span class="o">=</span> <span class="mf">150</span><span class="p">,</span>
    <span class="k">public</span> <span class="k">readonly</span> <span class="nx">minTopForTopPipe</span> <span class="o">=</span> <span class="mf">70</span><span class="p">,</span>
    <span class="k">public</span> <span class="k">readonly</span> <span class="nx">maxTopForTopPipe</span> <span class="o">=</span> <span class="mf">350</span><span class="p">,</span>
    <span class="k">public</span> <span class="k">readonly</span> <span class="nx">generateNewPipePercent</span> <span class="o">=</span> <span class="mf">0.7</span><span class="p">,</span>
    <span class="k">public</span> <span class="k">readonly</span> <span class="nx">speed</span> <span class="o">=</span> <span class="mf">1</span><span class="p">,</span>
    <span class="k">public</span> <span class="k">readonly</span> <span class="nx">groundHeight</span> <span class="o">=</span> <span class="mf">20</span><span class="p">,</span>
    <span class="k">public</span> <span class="k">readonly</span> <span class="nx">birdX</span> <span class="o">=</span> <span class="mf">40</span><span class="p">,</span>
    <span class="k">public</span> <span class="k">readonly</span> <span class="nx">birdSize</span> <span class="o">=</span> <span class="mf">20</span><span class="p">,</span>
    <span class="k">public</span> <span class="k">readonly</span> <span class="nx">gravity</span> <span class="o">=</span> <span class="mf">1.5</span><span class="p">,</span>
    <span class="k">public</span> <span class="k">readonly</span> <span class="nx">jumpVelocity</span> <span class="o">=</span> <span class="mf">10</span><span class="p">,</span>
    <span class="k">public</span> <span class="k">readonly</span> <span class="nx">slowVelocityBy</span> <span class="o">=</span> <span class="mf">0.3</span><span class="p">,</span>

  <span class="p">)</span> <span class="p">{}</span>
</code></pre></div>
</td></tr></table>
<p>27. Add the bird to Frame interface.</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">export</span> <span class="kd">interface</span> <span class="nx">Frame</span> <span class="p">{</span>
  <span class="nx">firstPipe</span>: <span class="kt">PipePair</span><span class="p">;</span>
  <span class="nx">secondPipe</span>: <span class="kt">PipePair</span><span class="p">;</span>
  <span class="nx">ground</span>: <span class="kt">Ground</span><span class="p">;</span>
  <span class="nx">bird</span>: <span class="kt">Bird</span><span class="p">;</span>
  <span class="nx">gameOver</span>: <span class="kt">boolean</span><span class="p">;</span>
  <span class="nx">gameStarted</span>: <span class="kt">boolean</span><span class="p">;</span>
  <span class="nx">width</span>: <span class="kt">number</span><span class="p">;</span>
  <span class="nx">height</span>: <span class="kt">number</span><span class="p">;</span>
  <span class="nx">score</span>: <span class="kt">number</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
</td></tr></table>
<p>28. Fix the newGame function to include the bird.</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>  <span class="k">public</span> <span class="nx">newGame</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">firstPipe</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">createPipe</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
    <span class="kd">let</span> <span class="nx">secondPipe</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">createPipe</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">frame</span> <span class="o">=</span> <span class="p">{</span>
      <span class="nx">firstPipe</span><span class="p">,</span>
      <span class="nx">secondPipe</span><span class="p">,</span>
      <span class="nx">score</span>: <span class="kt">0</span><span class="p">,</span>
      <span class="nx">width</span>: <span class="kt">this.width</span><span class="p">,</span>
      <span class="nx">height</span>: <span class="kt">this.height</span><span class="p">,</span>
      <span class="nx">gameOver</span>: <span class="kt">false</span><span class="p">,</span>
      <span class="nx">gameStarted</span>: <span class="kt">false</span><span class="p">,</span>
      <span class="nx">ground</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">height</span>: <span class="kt">this.groundHeight</span><span class="p">,</span>
      <span class="p">},</span>
      <span class="nx">bird</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">left</span>: <span class="kt">this.birdX</span><span class="p">,</span>
        <span class="nx">top</span>: <span class="kt">this.height</span> <span class="o">/</span> <span class="mf">2</span> <span class="o">-</span> <span class="k">this</span><span class="p">.</span><span class="nx">birdSize</span> <span class="o">/</span> <span class="mf">2</span><span class="p">,</span>
        <span class="nx">size</span>: <span class="kt">this.birdSize</span><span class="p">,</span>
      <span class="p">},</span>
    <span class="p">};</span>

    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="p">;</span>
  <span class="p">}</span>
</code></pre></div>
</td></tr></table>
<p>29. Add a bird svelte component to the game.</p>
<p>Bird Svelte</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">script</span> <span class="na">lang</span><span class="o">=</span><span class="s">&quot;ts&quot;</span><span class="p">&gt;</span>
  <span class="k">import</span> <span class="nx">type</span> <span class="p">{</span> <span class="nx">Bird</span> <span class="p">}</span> <span class="kr">from</span> <span class="s2">&quot;./game&quot;</span><span class="p">;</span>
  <span class="k">export</span> <span class="kd">let</span> <span class="nx">bird</span><span class="o">:</span> <span class="nx">Bird</span><span class="p">;</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">style</span><span class="p">&gt;</span>
  <span class="p">#</span><span class="nn">bird</span> <span class="p">{</span>
    <span class="k">border</span><span class="p">:</span> <span class="kc">solid</span> <span class="kc">black</span> <span class="mi">1</span><span class="kt">px</span><span class="p">;</span>
    <span class="k">background-color</span><span class="p">:</span> <span class="kc">yellow</span><span class="p">;</span>
    <span class="k">position</span><span class="p">:</span> <span class="kc">absolute</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">section</span>
  <span class="na">style</span><span class="o">=</span><span class="s">&quot;width: {bird.size}px; height: {bird.size}px; top: {bird.top}px; left: {bird.left}px;&quot;</span>
  <span class="na">id</span><span class="o">=</span><span class="s">&quot;bird&quot;</span>
<span class="p">&gt;&lt;/</span><span class="nt">section</span><span class="p">&gt;</span>
</code></pre></div>
</td></tr></table>
<p>Game.svelte</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">main</span> <span class="na">style</span><span class="o">=</span><span class="s">&quot;width: {frame.width}px; height: {frame.height}px;&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;game&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">Bird</span> <span class="na">bird</span><span class="o">=</span><span class="s">&quot;{frame.bird}&quot;</span> <span class="p">/&gt;</span>
  <span class="p">&lt;</span><span class="nt">Pipe</span> <span class="na">pipe</span><span class="o">=</span><span class="s">&quot;{frame.firstPipe}&quot;</span> <span class="p">/&gt;</span>
  <span class="p">&lt;</span><span class="nt">Pipe</span> <span class="na">pipe</span><span class="o">=</span><span class="s">&quot;{frame.secondPipe}&quot;</span> <span class="p">/&gt;</span>
  <span class="p">&lt;</span><span class="nt">section</span> <span class="na">style</span><span class="o">=</span><span class="s">&quot;height: {frame.ground.height}px;&quot;</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;ground&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">section</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">main</span><span class="p">&gt;</span>
</code></pre></div>
</td></tr></table>
<p><img alt="step29" src="../images/flappybird/step29.png" /></p>
<p>30. Add a function to the game controller called jump that will set the velocity to jumpVelocity if it's zero.</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">public</span> <span class="nx">jump</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">velocity</span> <span class="o">&lt;=</span> <span class="mf">0</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">velocity</span> <span class="o">+=</span> <span class="k">this</span><span class="p">.</span><span class="nx">jumpVelocity</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>
</code></pre></div>
</td></tr></table>
<p>31. Next create a window:svelte element and hook up a function to click event that will call someone clicks in the window.</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">script</span> <span class="na">lang</span><span class="o">=</span><span class="s">&quot;ts&quot;</span><span class="p">&gt;</span>
  <span class="p">...</span>
  <span class="kd">function</span> <span class="nx">jump</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">game</span><span class="p">.</span><span class="nx">jump</span><span class="p">();</span>
  <span class="p">}</span>
  <span class="p">...</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">svelte:window</span> <span class="na">on:click</span><span class="o">=</span><span class="s">&quot;{jump}&quot;</span> <span class="p">/&gt;</span>
</code></pre></div>
</td></tr></table>
<p>32. Add gravity to the next nextFrame function so that we can test this out.</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>  <span class="k">public</span> <span class="nx">nextFrame</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">firstPipe</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">movePipe</span><span class="p">(</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">firstPipe</span><span class="p">,</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">secondPipe</span>
    <span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">secondPipe</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">movePipe</span><span class="p">(</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">secondPipe</span><span class="p">,</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">firstPipe</span>
    <span class="p">);</span>

    <span class="c1">// Gravity section</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">velocity</span> <span class="o">&gt;</span> <span class="mf">0</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">velocity</span> <span class="o">-=</span> <span class="k">this</span><span class="p">.</span><span class="nx">slowVelocityBy</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">bird</span><span class="p">.</span><span class="nx">top</span> <span class="o">+=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">pow</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">gravity</span><span class="p">,</span> <span class="mf">2</span><span class="p">)</span> <span class="o">-</span> <span class="k">this</span><span class="p">.</span><span class="nx">velocity</span><span class="p">;</span>

    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="p">;</span>
  <span class="p">}</span>
</code></pre></div>
</td></tr></table>
<p>33. Stop generating new frames if the game is over.</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">public</span> <span class="nx">nextFrame</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">gameOver</span> <span class="o">||</span> <span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">gameStarted</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">firstPipe</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">movePipe</span><span class="p">(</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">firstPipe</span><span class="p">,</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">secondPipe</span>
    <span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">secondPipe</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">movePipe</span><span class="p">(</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">secondPipe</span><span class="p">,</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">firstPipe</span>
    <span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">velocity</span> <span class="o">&gt;</span> <span class="mf">0</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">velocity</span> <span class="o">-=</span> <span class="k">this</span><span class="p">.</span><span class="nx">slowVelocityBy</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">bird</span><span class="p">.</span><span class="nx">top</span> <span class="o">+=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">pow</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">gravity</span><span class="p">,</span> <span class="mf">2</span><span class="p">)</span> <span class="o">-</span> <span class="k">this</span><span class="p">.</span><span class="nx">velocity</span><span class="p">;</span>

    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="p">;</span>
  <span class="p">}</span>
</code></pre></div>
</td></tr></table>
<p>33. Add a start function to the game controller. This will create a game with game started.</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">public</span> <span class="nx">start</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">newGame</span><span class="p">();</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">gameStarted</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
  <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
</td></tr></table>
<p>34. Add a button to start the game if the game has not been started.</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
  <span class="kd">function</span> <span class="nx">startGame</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">frame</span> <span class="o">=</span> <span class="nx">game</span><span class="p">.</span><span class="nx">start</span><span class="p">();</span>
  <span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">style</span><span class="p">&gt;</span>
  <span class="o">...</span> <span class="p">#</span><span class="nn">init-screen</span> <span class="p">{</span>
    <span class="k">user-select</span><span class="p">:</span> <span class="kc">none</span><span class="p">;</span>
    <span class="k">position</span><span class="p">:</span> <span class="kc">absolute</span><span class="p">;</span>
    <span class="k">top</span><span class="p">:</span> <span class="mi">50</span><span class="kt">%</span><span class="p">;</span>
    <span class="k">left</span><span class="p">:</span> <span class="mi">50</span><span class="kt">%</span><span class="p">;</span>
    <span class="k">transform</span><span class="p">:</span> <span class="nb">translateX</span><span class="p">(</span><span class="nv">-50</span><span class="err">%</span><span class="p">)</span> <span class="nb">translateY</span><span class="p">(</span><span class="nv">-50</span><span class="err">%</span><span class="p">);</span>
    <span class="k">font-family</span><span class="p">:</span> <span class="kc">monospace</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="p">#</span><span class="nn">init-screen</span> <span class="nt">h2</span> <span class="p">{</span>
    <span class="k">text-align</span><span class="p">:</span> <span class="kc">center</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="p">#</span><span class="nn">init-screen</span> <span class="nt">button</span> <span class="p">{</span>
    <span class="k">font-family</span><span class="p">:</span> <span class="kc">monospace</span><span class="p">;</span>
    <span class="k">font-size</span><span class="p">:</span> <span class="mi">16</span><span class="kt">px</span><span class="p">;</span>
    <span class="k">border</span><span class="p">:</span> <span class="kc">none</span><span class="p">;</span>
    <span class="k">border-radius</span><span class="p">:</span> <span class="kc">none</span><span class="p">;</span>
    <span class="k">background-color</span><span class="p">:</span> <span class="kc">ghostwhite</span><span class="p">;</span>
    <span class="k">padding</span><span class="p">:</span> <span class="mi">10</span><span class="kt">px</span><span class="p">;</span>
    <span class="k">cursor</span><span class="p">:</span> <span class="kc">pointer</span><span class="p">;</span>
    <span class="k">outline</span><span class="p">:</span> <span class="kc">none</span><span class="p">;</span>
    <span class="k">transition</span><span class="p">:</span> <span class="kc">ease-in-out</span> <span class="mf">0.2</span><span class="kt">s</span> <span class="k">font-size</span><span class="p">;</span>
    <span class="k">display</span><span class="p">:</span> <span class="kc">block</span><span class="p">;</span>
    <span class="k">margin</span><span class="p">:</span> <span class="mi">0</span> <span class="kc">auto</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="p">#</span><span class="nn">init-screen</span> <span class="nt">button</span><span class="p">:</span><span class="nd">active</span><span class="o">,</span>
  <span class="p">#</span><span class="nn">init-screen</span> <span class="nt">button</span><span class="p">:</span><span class="nd">focus</span> <span class="p">{</span>
    <span class="k">outline</span><span class="p">:</span> <span class="kc">none</span><span class="p">;</span>
    <span class="k">font-size</span><span class="p">:</span> <span class="mi">15</span><span class="kt">px</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">main</span> <span class="na">style</span><span class="o">=</span><span class="s">&quot;width: {frame.width}px; height: {frame.height}px;&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;game&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">section</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;score&quot;</span><span class="p">&gt;</span>{frame.score}<span class="p">&lt;/</span><span class="nt">section</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">Bird</span> <span class="na">bind:bird</span><span class="o">=</span><span class="s">&quot;{frame.bird}&quot;</span> <span class="p">/&gt;</span>
  <span class="p">&lt;</span><span class="nt">Pipe</span> <span class="na">bind:pipe</span><span class="o">=</span><span class="s">&quot;{frame.firstPipe}&quot;</span> <span class="p">/&gt;</span>
  <span class="p">&lt;</span><span class="nt">Pipe</span> <span class="na">bind:pipe</span><span class="o">=</span><span class="s">&quot;{frame.secondPipe}&quot;</span> <span class="p">/&gt;</span>
  {#if frame.gameOver || !frame.gameStarted}
  <span class="p">&lt;</span><span class="nt">section</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;init-screen&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">button</span> <span class="na">on:click</span><span class="o">=</span><span class="s">&quot;{startGame}&quot;</span><span class="p">&gt;</span>Start Game<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">section</span><span class="p">&gt;</span>
  {/if}
  <span class="p">&lt;</span><span class="nt">section</span> <span class="na">style</span><span class="o">=</span><span class="s">&quot;height: {frame.ground.height}px;&quot;</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;ground&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">section</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">main</span><span class="p">&gt;</span>
</code></pre></div>
</td></tr></table>
<p><img alt="step34" src="../images/flappybird/step34.png" /></p>
<p>35. Add if statement to make sure the bird has not hit the ground if it has set gameOver to true.</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>  <span class="k">public</span> <span class="nx">nextFrame</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">gameOver</span> <span class="o">||</span> <span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">gameStarted</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">// Move Pipes</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">firstPipe</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">movePipe</span><span class="p">(</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">firstPipe</span><span class="p">,</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">secondPipe</span>
    <span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">secondPipe</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">movePipe</span><span class="p">(</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">secondPipe</span><span class="p">,</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">firstPipe</span>
    <span class="p">);</span>

    <span class="c1">// Checking if bird hit the ground</span>
    <span class="k">if</span> <span class="p">(</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">bird</span><span class="p">.</span><span class="nx">top</span> <span class="o">&gt;=</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">height</span> <span class="o">-</span> <span class="k">this</span><span class="p">.</span><span class="nx">groundHeight</span> <span class="o">-</span> <span class="k">this</span><span class="p">.</span><span class="nx">birdSize</span>
    <span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">bird</span><span class="p">.</span><span class="nx">top</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">height</span> <span class="o">-</span> <span class="k">this</span><span class="p">.</span><span class="nx">groundHeight</span> <span class="o">-</span> <span class="k">this</span><span class="p">.</span><span class="nx">birdSize</span><span class="p">;</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">gameOver</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="c1">// End Check if bird hit ground</span>

    <span class="c1">// Add gravity and velocity upward if</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">velocity</span> <span class="o">&gt;</span> <span class="mf">0</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">velocity</span> <span class="o">-=</span> <span class="k">this</span><span class="p">.</span><span class="nx">slowVelocityBy</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">bird</span><span class="p">.</span><span class="nx">top</span> <span class="o">+=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">pow</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">gravity</span><span class="p">,</span> <span class="mf">2</span><span class="p">)</span> <span class="o">-</span> <span class="k">this</span><span class="p">.</span><span class="nx">velocity</span><span class="p">;</span>
    <span class="c1">// End gravity and velocity upward if</span>

    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="p">;</span>
  <span class="p">}</span>
</code></pre></div>
</td></tr></table>
<p>36. Check and see if the bird has collided with the pipe. checkPipe checks to see if the bird is between the pipes. Has Collided with pipe will see if the pipe is not between the pipe if it's visible.</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">private</span> <span class="nx">checkPipe</span><span class="p">(</span><span class="nx">left</span>: <span class="kt">number</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span>
      <span class="nx">left</span> <span class="o">&lt;=</span> <span class="k">this</span><span class="p">.</span><span class="nx">birdX</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">birdSize</span> <span class="o">&amp;&amp;</span> <span class="nx">left</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">pipeWidth</span> <span class="o">&gt;=</span> <span class="k">this</span><span class="p">.</span><span class="nx">birdX</span>
    <span class="p">);</span>
<span class="p">}</span>

<span class="k">private</span> <span class="nx">hasCollidedWithPipe</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">firstPipe</span><span class="p">.</span><span class="nx">show</span> <span class="o">&amp;&amp;</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">checkPipe</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">firstPipe</span><span class="p">.</span><span class="nx">left</span><span class="p">)</span>
    <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="o">!</span><span class="p">(</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">bird</span><span class="p">.</span><span class="nx">top</span> <span class="o">&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">firstPipe</span><span class="p">.</span><span class="nx">topPipe</span><span class="p">.</span><span class="nx">height</span> <span class="o">&amp;&amp;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">bird</span><span class="p">.</span><span class="nx">top</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">birdSize</span> <span class="o">&lt;</span>
          <span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">firstPipe</span><span class="p">.</span><span class="nx">bottomPipe</span><span class="p">.</span><span class="nx">top</span>
      <span class="p">);</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">secondPipe</span><span class="p">.</span><span class="nx">show</span> <span class="o">&amp;&amp;</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">checkPipe</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">secondPipe</span><span class="p">.</span><span class="nx">left</span><span class="p">)</span>
    <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="o">!</span><span class="p">(</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">bird</span><span class="p">.</span><span class="nx">top</span> <span class="o">&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">secondPipe</span><span class="p">.</span><span class="nx">topPipe</span><span class="p">.</span><span class="nx">height</span> <span class="o">&amp;&amp;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">bird</span><span class="p">.</span><span class="nx">top</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">birdSize</span> <span class="o">&lt;</span>
          <span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">secondPipe</span><span class="p">.</span><span class="nx">bottomPipe</span><span class="p">.</span><span class="nx">top</span>
      <span class="p">);</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
  <span class="p">}</span>
</code></pre></div>
</td></tr></table>
<p>38. Use the hasCollidedWithPipe function in the nextFrame to see if the game needs to end.</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">public</span> <span class="nx">nextFrame</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">gameOver</span> <span class="o">||</span> <span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">gameStarted</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">firstPipe</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">movePipe</span><span class="p">(</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">firstPipe</span><span class="p">,</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">secondPipe</span>
    <span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">secondPipe</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">movePipe</span><span class="p">(</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">secondPipe</span><span class="p">,</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">firstPipe</span>
    <span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">bird</span><span class="p">.</span><span class="nx">top</span> <span class="o">&gt;=</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">height</span> <span class="o">-</span> <span class="k">this</span><span class="p">.</span><span class="nx">groundHeight</span> <span class="o">-</span> <span class="k">this</span><span class="p">.</span><span class="nx">birdSize</span>
    <span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">bird</span><span class="p">.</span><span class="nx">top</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">height</span> <span class="o">-</span> <span class="k">this</span><span class="p">.</span><span class="nx">groundHeight</span> <span class="o">-</span> <span class="k">this</span><span class="p">.</span><span class="nx">birdSize</span><span class="p">;</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">gameOver</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">// Checks if the pipe has collided with the bird</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">hasCollidedWithPipe</span><span class="p">())</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">gameOver</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">velocity</span> <span class="o">&gt;</span> <span class="mf">0</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">velocity</span> <span class="o">-=</span> <span class="k">this</span><span class="p">.</span><span class="nx">slowVelocityBy</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">bird</span><span class="p">.</span><span class="nx">top</span> <span class="o">+=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">pow</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">gravity</span><span class="p">,</span> <span class="mf">2</span><span class="p">)</span> <span class="o">-</span> <span class="k">this</span><span class="p">.</span><span class="nx">velocity</span><span class="p">;</span>

    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="p">;</span>
  <span class="p">}</span>
</code></pre></div>
</td></tr></table>
<p>39. Check if the first or second pipe is equal to birdX and if so add one to the score.</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>  <span class="k">public</span> <span class="nx">nextFrame</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">gameOver</span> <span class="o">||</span> <span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">gameStarted</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">firstPipe</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">movePipe</span><span class="p">(</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">firstPipe</span><span class="p">,</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">secondPipe</span>
    <span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">secondPipe</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">movePipe</span><span class="p">(</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">secondPipe</span><span class="p">,</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">firstPipe</span>
    <span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">bird</span><span class="p">.</span><span class="nx">top</span> <span class="o">&gt;=</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">height</span> <span class="o">-</span> <span class="k">this</span><span class="p">.</span><span class="nx">groundHeight</span> <span class="o">-</span> <span class="k">this</span><span class="p">.</span><span class="nx">birdSize</span>
    <span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">bird</span><span class="p">.</span><span class="nx">top</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">height</span> <span class="o">-</span> <span class="k">this</span><span class="p">.</span><span class="nx">groundHeight</span> <span class="o">-</span> <span class="k">this</span><span class="p">.</span><span class="nx">birdSize</span><span class="p">;</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">gameOver</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">hasCollidedWithPipe</span><span class="p">())</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">gameOver</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">velocity</span> <span class="o">&gt;</span> <span class="mf">0</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">velocity</span> <span class="o">-=</span> <span class="k">this</span><span class="p">.</span><span class="nx">slowVelocityBy</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">// Add score</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">firstPipe</span><span class="p">.</span><span class="nx">left</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">pipeWidth</span> <span class="o">==</span> <span class="k">this</span><span class="p">.</span><span class="nx">birdX</span> <span class="o">-</span> <span class="k">this</span><span class="p">.</span><span class="nx">speed</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">score</span> <span class="o">+=</span> <span class="mf">1</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">// Add Score</span>
    <span class="k">if</span> <span class="p">(</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">secondPipe</span><span class="p">.</span><span class="nx">left</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">pipeWidth</span> <span class="o">==</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">birdX</span> <span class="o">-</span> <span class="k">this</span><span class="p">.</span><span class="nx">speed</span>
    <span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">score</span> <span class="o">+=</span> <span class="mf">1</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="p">.</span><span class="nx">bird</span><span class="p">.</span><span class="nx">top</span> <span class="o">+=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">pow</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">gravity</span><span class="p">,</span> <span class="mf">2</span><span class="p">)</span> <span class="o">-</span> <span class="k">this</span><span class="p">.</span><span class="nx">velocity</span><span class="p">;</span>

    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">frame</span><span class="p">;</span>
  <span class="p">}</span>
</code></pre></div>
</td></tr></table>
<p>40. Display the score in the game.</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">style</span><span class="p">&gt;</span>
  <span class="o">...</span> <span class="p">#</span><span class="nn">score</span> <span class="p">{</span>
    <span class="k">position</span><span class="p">:</span> <span class="kc">absolute</span><span class="p">;</span>
    <span class="k">right</span><span class="p">:</span> <span class="mi">10</span><span class="kt">px</span><span class="p">;</span>
    <span class="k">top</span><span class="p">:</span> <span class="mi">10</span><span class="kt">px</span><span class="p">;</span>
    <span class="k">font-size</span><span class="p">:</span> <span class="mi">20</span><span class="kt">px</span><span class="p">;</span>
    <span class="k">z-index</span><span class="p">:</span> <span class="mi">10</span><span class="p">;</span>
    <span class="k">padding</span><span class="p">:</span> <span class="mi">5</span><span class="kt">px</span><span class="p">;</span>
    <span class="k">font-family</span><span class="p">:</span> <span class="kc">cursive</span><span class="p">;</span>
    <span class="k">background-color</span><span class="p">:</span> <span class="kc">white</span><span class="p">;</span>
    <span class="k">user-select</span><span class="p">:</span> <span class="kc">none</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">main</span> <span class="na">style</span><span class="o">=</span><span class="s">&quot;width: {frame.width}px; height: {frame.height}px;&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;game&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">section</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;score&quot;</span><span class="p">&gt;</span>{frame.score}<span class="p">&lt;/</span><span class="nt">section</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">Bird</span> <span class="na">bird</span><span class="o">=</span><span class="s">&quot;{frame.bird}&quot;</span> <span class="p">/&gt;</span>
  <span class="p">&lt;</span><span class="nt">Pipe</span> <span class="na">pipe</span><span class="o">=</span><span class="s">&quot;{frame.firstPipe}&quot;</span> <span class="p">/&gt;</span>
  <span class="p">&lt;</span><span class="nt">Pipe</span> <span class="na">pipe</span><span class="o">=</span><span class="s">&quot;{frame.secondPipe}&quot;</span> <span class="p">/&gt;</span>
  {#if frame.gameOver || !frame.gameStarted}
  <span class="p">&lt;</span><span class="nt">section</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;init-screen&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">button</span> <span class="na">on:click</span><span class="o">=</span><span class="s">&quot;{startGame}&quot;</span><span class="p">&gt;</span>Start Game<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">section</span><span class="p">&gt;</span>
  {/if}
  <span class="p">&lt;</span><span class="nt">section</span> <span class="na">style</span><span class="o">=</span><span class="s">&quot;height: {frame.ground.height}px;&quot;</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;ground&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">section</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">main</span><span class="p">&gt;</span>
</code></pre></div>
</td></tr></table>
<p><img alt="step40" src="../images/flappybird/step40.png" /></p>
<p>41. Add the score to the end game screen.</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">style</span><span class="p">&gt;</span>
  <span class="o">...</span> <span class="p">#</span><span class="nn">init-screen</span> <span class="nt">h2</span> <span class="p">{</span>
    <span class="k">text-align</span><span class="p">:</span> <span class="kc">center</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="o">...;</span>
<span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>
... {#if frame.gameOver || !frame.gameStarted}
<span class="p">&lt;</span><span class="nt">section</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;init-screen&quot;</span><span class="p">&gt;</span>
  {#if frame.gameOver}
  <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span>Game Over<span class="p">&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span>Score {frame.score}<span class="p">&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
  {/if}
  <span class="p">&lt;</span><span class="nt">button</span> <span class="na">on:click</span><span class="o">=</span><span class="s">&quot;{startGame}&quot;</span><span class="p">&gt;</span>Start Game<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">section</span><span class="p">&gt;</span>
{/if} ...
</code></pre></div>
</td></tr></table>
<p><img alt="step41" src="../images/flappybird/step40.png" /></p>
                
              
              
                


              
            </article>
          </div>
        </div>
        
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href=".." class="md-footer__link md-footer__link--prev" aria-label="Previous: Home" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Home
            </div>
          </div>
        </a>
      
      
        
        <a href="../webcomponents/" class="md-footer__link md-footer__link--next" aria-label="Next: Web Components" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Web Components
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
        
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": ["content.code.annotate"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../assets/javascripts/workers/search.409db549.min.js", "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.756773cc.min.js"></script>
      
    
  </body>
</html>